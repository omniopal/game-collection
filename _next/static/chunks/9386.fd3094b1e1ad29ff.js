(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9386],{41234:()=>{},87835:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>T});var s=l(95155),o=l(12115);l(28021);var n=l(98741),a=l(35761),r=l(11828),c=l(66656),i=l(43463),d=l(48940),h=l(37578),u=l(55490),g=l(7303),m=l(39567),x=l.n(m),p=l(31237),f=l(92114);let j=e=>{for(let t of p.Z)if(t.name===e)return"Kanto";for(let t of f.c)if(t.name===e)return"Johto";return"Hoenn"};var v=l(78416),S=l(80906),I=l(1396),N=l(36417),b=l(27753),w=l(26214);l(54030);var y=l(32444);let k=e=>{let{isOpen:t,setIsDialogOpen:l}=e,[n,a]=(0,o.useState)(!1),[r,i]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e=localStorage.getItem("guesses");e&&i(e.split(","))},[t]);let d=async()=>{let e="Pok\xe9Melody #1 Results:\n",t=localStorage.getItem("guesses");if(t){let l=t.split(",");i(l),l.forEach((t,l)=>{let s="\uD83C\uDFB5 ".concat(l+1,": "),o=Number.parseInt(t);for(let e=0;e<o;e++)o-1===e?s+="✅\n":s+="❌";e+=s}),e+="Total guesses: ".concat(u(l))}try{await navigator.clipboard.writeText(e),a(!0)}catch(e){console.error("Failed to copy results to clipboard:",e)}},h=(e,t)=>{"clickaway"!==t&&a(!1)},u=e=>{let t=0;return e.forEach(e=>{t+=Number.parseInt(e)}),t};return(0,s.jsxs)(v.A,{className:"dialog",open:t,PaperProps:{sx:{backgroundColor:"hsl(198, 50%, 10%)"}},children:[(0,s.jsx)(S.A,{open:n,autoHideDuration:3e3,onClose:h,anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,s.jsx)(I.A,{onClose:h,severity:"success",variant:"filled",children:"Results copied to clipboard"})}),(0,s.jsx)(N.A,{className:"dialog-title",sx:{paddingBlockEnd:0},children:(0,s.jsx)("p",{children:"Thanks for playing today!"})}),(0,s.jsxs)(b.A,{className:"dialog-content",children:[(0,s.jsx)("h3",{className:"your-results",children:"Your results:"}),(0,s.jsx)("table",{className:"table",children:(0,s.jsx)("tbody",{children:r.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:["\uD83C\uDFB5 #",t+1,":"]}),(0,s.jsxs)("td",{children:[e," ",1===Number.parseInt(e)?"guess":"guesses"]})]},t))})}),(0,s.jsxs)("div",{className:"total-guesses",children:["Total guesses: ",(0,s.jsx)("span",{className:"your-results",children:u(r)})]}),(0,s.jsxs)("button",{className:"share-button",onClick:d,children:["Copy ",(0,s.jsx)(y.A,{fontSize:"small"})]})]}),(0,s.jsx)(w.A,{children:(0,s.jsx)(c.A,{sx:{textDecoration:"none",color:"hsl(198, 50%, 10%)",fontWeight:600,padding:0},className:"link",href:"/freeplay",onClick:()=>l(!1),children:"Go to Free Play"})})]})};var C=l(87092);let T=()=>{var e,t;let[l,m]=(0,o.useState)(""),[p,f]=(0,o.useState)(""),v=(0,o.useRef)(null),[S,I]=(0,o.useState)(null),[N,b]=(0,o.useState)([]),[w,y]=(0,o.useState)("Kanto"),[T,A]=(0,o.useState)([]),[D,M]=(0,o.useState)([]),[E,Z]=(0,o.useState)(!1),[P,L]=(0,o.useState)([]),[O,F]=(0,o.useState)([]),R=Number.parseInt(null!==(t=localStorage.getItem("themeIndex"))&&void 0!==t?t:"1"),[z,B]=(0,o.useState)(R-1),[H,K]=(0,o.useState)(!1),_=(0,a.A)(),J=(0,r.A)(_.breakpoints.down(700)),W=J?new n.LatLng(800,2102):new n.LatLng(725,2202),Y=J?-2:-1,G=J?"360px":"500px",U=new n.LatLngBounds([0,0],[1600,4405]);(0,o.useEffect)(()=>{var e,t;let l=localStorage.getItem("themeIndex");if(l){let e=Number.parseInt(l);console.log("0");let s=null===(t=P[e-1])||void 0===t?void 0:t.towns[0];console.log(s),y(j(s))}else(null===(e=P[0])||void 0===e?void 0:e.towns)&&(console.log("1"),y(j(P[0].towns[0])));q()},[z]);let q=()=>{if(d.Z[w]){if(v.current&&(v.current.pause(),v.current.currentTime=0),!E&&z<P.length&&P.length>0){console.log("index: ".concat(z));let e=P[z],t=new Audio(e.file);t.volume=.05,t.play(),v.current=t,I(e.name),console.log("2"),b(e.towns)}if(E&&z<O.length&&O.length>0){console.log("index: ".concat(z));let e=O[z],t=new Audio(null==e?void 0:e.file);t.volume=.05,t.play(),v.current=t,e&&(I(e.name),b(e.towns)),console.log("2")}}},Q=e=>{if(m(e),S){if(console.log(e),N.includes(e)){var t;f("Correct!");let e=[...T,D.length+1];if(A(e),M([]),null===(t=v.current)||void 0===t||t.pause(),console.log("dailyThemeIndex: "+z),console.log("other: ".concat(P.length-1)),z===P.length-1)localStorage.setItem("guesses",e.toString()),K(!0);else{let e=localStorage.getItem("themeIndex");if(e){let t=Number.parseInt(e);localStorage.setItem("themeIndex","".concat(t+1))}B(z+1)}}else D.includes(e)||M([...D,e]),f("Wrong")}},V=(e,t)=>{let l=[...e];for(let e=l.length-1;e>0;e--){let s=Math.floor(t()*(e+1));[l[e],l[s]]=[l[s],l[e]]}return l},X=()=>{let e=new Date().toISOString().split("T")[0],t=x()(e),l=d.Z.Kanto,s=l.theme.length,o=l.theme[Math.floor(t()*s)],n=l.theme[Math.floor(t()*s)],a=d.Z.Johto,r=a.theme.length,c=a.theme[Math.floor(t()*r)],i=a.theme[Math.floor(t()*r)],h=d.Z.Hoenn,u=h.theme.length;return[o,n,c,i,h.theme[Math.floor(t()*u)],h.theme[Math.floor(t()*u)]]},$=()=>{let e=new Date().toISOString().split("T")[0],t=x()(e);return V(Object.values(d.Z).flatMap(e=>e.ogTheme),t).slice(0,5)};return(0,o.useEffect)(()=>{let e=localStorage.getItem("date"),t=new Date().toISOString().split("T")[0],l=localStorage.getItem("themeIndex");e||localStorage.setItem("date",t),e===t&&"6"===l&&K(!0),e!=t&&(localStorage.setItem("date",t),localStorage.setItem("themeIndex","1"),localStorage.removeItem("guesses"));let s=X(),o=$();console.log(s),L(s),F(o);let n=localStorage.getItem("themeIndex");if(n){var a;let e=Number.parseInt(n);console.log("5");let t=null===(a=s[e-1])||void 0===a?void 0:a.towns[0];console.log(t),y(j(t))}else console.log("6"),localStorage.setItem("themeIndex","1"),y(j(s[0].towns[0]))},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{sx:{marginBlockStart:"8px",marginInlineStart:"8px"},className:"logo-container",href:"/pokemon",children:(0,s.jsx)("img",{className:"logo",src:"/images/logo3.png",alt:"PokeMelody logo"})}),(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("div",{className:"region",children:(0,s.jsxs)("h2",{children:["Region: ",w]})}),(0,s.jsxs)("div",{className:"score-container",children:[(0,s.jsx)("p",{className:"score-label",children:"Round: "}),(0,s.jsxs)("p",{className:"score",children:[localStorage.getItem("themeIndex")," / ",P.length]})]})]}),"Kanto"===w&&(0,s.jsx)(h.y,{handleTownClick:Q,height:G,bounds:U,guesses:D,center:W,zoom:Y}),"Johto"===w&&(0,s.jsx)(u.r,{handleTownClick:Q,height:G,bounds:U,guesses:D,center:W,zoom:Y}),"Hoenn"===w&&(0,s.jsx)(C.d,{handleTownClick:Q,height:G,bounds:U,guesses:D,center:W,zoom:Y}),"Sinnoh"===w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"construction",children:"Under construction"}),(0,s.jsx)("h3",{className:"construction",children:"Come back soon :)"})]}),(0,s.jsxs)("div",{className:"stuff",children:[(0,s.jsx)("p",{children:"Play a random theme and then click on which location it belongs to!"}),(0,s.jsxs)("div",{className:"buttons",children:[(0,s.jsx)("button",{className:"button",onClick:q,children:"Play Theme"}),(0,s.jsx)("button",{className:"button",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.pause()},children:"Stop music"}),(0,s.jsx)("button",{className:"button",onClick:()=>{localStorage.setItem("themeIndex","1"),B(0),A([]),K(!0)},children:"Reset"})]}),(null===(e=d.Z[w])||void 0===e?void 0:e.ogTheme)&&(0,s.jsxs)("div",{className:"theme-version-toggle",children:[(0,s.jsx)("div",{className:"play-original-theme",children:"Play original themes"}),(0,s.jsx)(g.Y,{onChange:()=>{Z(!E),v.current&&(v.current.pause(),v.current.currentTime=0);let e=E?d.Z[w].theme:d.Z[w].ogTheme;null==e||e.forEach(e=>{if(console.log("4"),e.towns.includes(N[0])){let t=new Audio(e.file);t.volume=.05,t.play(),v.current=t;return}})}})]}),(0,s.jsxs)("div",{className:"results",children:[(0,s.jsxs)("div",{className:"town-name-display",children:[(0,s.jsx)("p",{children:"Last town selected: "}),(0,s.jsx)("p",{className:"town-name",children:l||"awaiting selection..."})]}),p&&(0,s.jsx)("div",{className:(0,i.A)("Correct!"===p?"correct":"wrong"),children:p})]})]}),(0,s.jsx)(k,{isOpen:H,setIsDialogOpen:K})]})}},54030:()=>{},28021:()=>{}}]);