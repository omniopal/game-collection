(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9690],{41234:()=>{},2579:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>F});var o=l(95155),s=l(12115);l(28021);var n=l(98741),a=l(35761),r=l(11828),c=l(66656),i=l(43463),u=l(3575),d=l(37578),m=l(55490),g=l(7303),h=l(31237),x=l(92114),p=l(33502);let f=e=>{for(let t of h.Z)if(t.name===e)return"Kanto";for(let t of x.c)if(t.name===e)return"Johto";for(let t of p.G)if(t.name===e)return"Hoenn";return"Sinnoh"};var S=l(78416),v=l(80906),I=l(1396),j=l(36417),N=l(27753);l(54030);var w=l(32444),b=l(24508);let y=e=>{let{isOpen:t,setIsDialogOpen:l}=e,[n,a]=(0,s.useState)(!1),[r,i]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=localStorage.getItem("guesses");e&&i(e.split(","))},[t]);let u=async()=>{let e=g(),t="Pok\xe9Melody #".concat(e," Results:\n"),l=localStorage.getItem("guesses");if(l){let e=l.split(",");i(e),e.forEach((e,l)=>{let o="\uD83C\uDFB5 #".concat(l+1,": "),s=Number.parseInt(e);for(let e=0;e<s;e++)s-1===e?o+="✅\n":o+="❌";t+=o}),t+="Total guesses: ".concat(m(e))}try{await navigator.clipboard.writeText(t),a(!0)}catch(e){console.error("Failed to copy results to clipboard:",e)}},d=(e,t)=>{"clickaway"!==t&&a(!1)},m=e=>{let t=0;return e.forEach(e=>{t+=Number.parseInt(e)}),t};function g(){return Math.floor(Math.abs(new Date("2025-02-18").getTime()-new Date(new Date().toLocaleDateString("en-CA",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})).getTime())/864e5)+1}return(0,o.jsxs)(S.A,{className:"dialog",open:t,PaperProps:{sx:{backgroundColor:"hsl(198, 50%, 10%)"}},children:[(0,o.jsx)(v.A,{open:n,autoHideDuration:3e3,onClose:d,anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,o.jsx)(I.A,{onClose:d,severity:"success",variant:"filled",children:"Results copied to clipboard"})}),(0,o.jsx)(j.A,{className:"dialog-title",sx:{paddingBlockEnd:0},children:(0,o.jsx)("p",{children:"Thanks for playing today!"})}),(0,o.jsxs)(N.A,{className:"dialog-content",children:[(0,o.jsxs)("h3",{className:"your-results",children:["Your Pok\xe9Melody #",g()," results:"]}),(0,o.jsx)("table",{className:"table",children:(0,o.jsx)("tbody",{children:r.map((e,t)=>(0,o.jsxs)("tr",{className:"tr",children:[(0,o.jsxs)("td",{className:"td",children:[(0,o.jsx)(b.A,{sx:{dispaly:"flex",color:"hsl(258, 80%, 80%)"}}),(0,o.jsxs)("div",{children:["#",t+1,":"]})]}),(0,o.jsxs)("td",{children:[e," ",1===Number.parseInt(e)?"guess":"guesses"]})]},t))})}),(0,o.jsxs)("div",{className:"total-guesses",children:["Total guesses: ",(0,o.jsx)("span",{className:"your-results",children:m(r)})]}),(0,o.jsxs)("button",{className:"share-button",onClick:u,children:["Copy ",(0,o.jsx)(w.A,{fontSize:"small"})]}),(0,o.jsx)(c.A,{sx:{textDecoration:"none",color:"hsl(198, 50%, 10%)",fontWeight:600,padding:0},className:"link",href:"/freeplay",onClick:()=>l(!1),children:"Go to Free Play"})]})]})};var T=l(28142),k=l(65213),C=l(39567),D=l.n(C);let A=(e,t,l)=>{let o;do o=e[Math.floor(l()*e.length)];while((null==o?void 0:o.name)===(null==t?void 0:t.name));return o},Z=(e,t,l)=>{let o=l?u.Z[e].ogTheme:u.Z[e].theme,s=o[Math.floor(t()*o.length)],n=A(o,s,t);return[s,n]},L=()=>{let e=new Date(new Date().toLocaleDateString("en-CA",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})).toISOString().split("T")[0],t=D()(e);return[...Z("Kanto",t),...Z("Johto",t),...Z("Hoenn",t),...Z("Sinnoh",t)]},E=()=>{let e=new Date(new Date().toLocaleDateString("en-CA",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})).toISOString().split("T")[0],t=D()(e);return[...Z("Kanto",t,!0),...Z("Johto",t,!0),...Z("Hoenn",t,!0),...Z("Sinnoh",t,!0)]};var O=l(19132);let F=()=>{var e;let[t,l]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),p=(0,s.useRef)(null),[S,v]=(0,s.useState)(null),[I,j]=(0,s.useState)([]),[N,w]=(0,s.useState)("Kanto"),[b,C]=(0,s.useState)([]),[D,A]=(0,s.useState)([]),[Z,F]=(0,s.useState)(!0),[P,M]=(0,s.useState)([]),[z,R]=(0,s.useState)([]),[H,K]=(0,s.useState)(0),[B,J]=(0,s.useState)(!1),_=(0,a.A)(),G=(0,r.A)(_.breakpoints.down(700)),W=G?new n.LatLng(800,2102):new n.LatLng(725,2202),Y=G?-2:-1,q=G?"360px":"500px",Q=new n.LatLngBounds([0,0],[1600,4405]);(0,s.useEffect)(()=>{var e,t;let l=localStorage.getItem("themeIndex");if(l){let e=Number.parseInt(l);console.log("0");let o=null===(t=P[e-1])||void 0===t?void 0:t.towns[0];console.log(o),w(f(o))}else(null===(e=P[0])||void 0===e?void 0:e.towns)&&(console.log("1"),w(f(P[0].towns[0])));H>1&&H<=8&&U()},[H]);let U=()=>{if(u.Z[N]){if(p.current&&(p.current.pause(),p.current.currentTime=0),!Z&&H<=P.length&&P.length>0){console.log("index: ".concat(H));let e=P[H-1],t=new Audio(e.file);t.volume=.05,t.autoplay=!0,t.play(),p.current=t,v(e.name),console.log("2"),j(e.towns)}if(Z&&H<=z.length&&z.length>0){console.log("index: ".concat(H));let e=z[H-1],t=new Audio(null==e?void 0:e.file);t.volume=.05,t.autoplay=!0,t.play(),p.current=t,e&&(v(e.name),j(e.towns)),console.log("2")}}},V=e=>{if(l(e),S){if(console.log(e),I.includes(e)){var t;x("Correct!");let e=[...b,D.length+1];if(C(e),A([]),null===(t=p.current)||void 0===t||t.pause(),console.log("dailyThemeIndex: "+H),console.log("other: ".concat(P.length-1)),H===P.length)localStorage.setItem("guesses",e.toString()),J(!0);else{let t=localStorage.getItem("themeIndex");if(t){let l=Number.parseInt(t);localStorage.setItem("themeIndex","".concat(l+1)),localStorage.setItem("guesses",e.toString())}K(H+1),H%2==0&&l("")}}else D.includes(e)||A([...D,e]),x("Wrong")}};return(0,s.useEffect)(()=>{let e=localStorage.getItem("date"),t=new Date(new Date().toLocaleDateString("en-CA",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})).toISOString().split("T")[0];e&&e!=t&&(localStorage.setItem("date",t),localStorage.setItem("themeIndex","1"),localStorage.removeItem("guesses"));let l=localStorage.getItem("themeIndex");console.log("Local Date: "+e),console.log("Today: "+t),console.log("Theme Index: "+l),e||localStorage.setItem("date",t),e===t&&"8"===l&&J(!0);let o=L(),s=E();console.log(o),M(o),R(s);let n=localStorage.getItem("themeIndex");if(n&&8>Number.parseInt(n)){var a;let e=null===(a=o[Number.parseInt(n)-1])||void 0===a?void 0:a.towns[0];console.log(e),w(f(e))}n||(localStorage.setItem("themeIndex","1"),w(f(o[0].towns[0])));let r=localStorage.getItem("guesses");if(r){let e=r.split(","),t=[];e.forEach(e=>{t.push(Number.parseInt(e))}),C(t)}n&&8>Number.parseInt(n)?K(Number.parseInt(n)):K(0)},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.A,{sx:{marginBlockStart:"8px",marginInlineStart:"8px"},className:"logo-container",href:"/pokemon",children:(0,o.jsx)("img",{className:"logo",src:"/images/logo3.png",alt:"PokeMelody logo"})}),(0,o.jsxs)("div",{className:"header",children:[(0,o.jsx)("div",{className:"region",children:(0,o.jsxs)("h2",{children:["Region: ",(0,o.jsx)("span",{className:"region-name",children:N})]})}),(0,o.jsxs)("div",{className:"score-container",children:[(0,o.jsx)("p",{className:"score-label",children:"Round: "}),(0,o.jsxs)("p",{className:"score",children:[localStorage.getItem("themeIndex")," / ",P.length]})]})]}),"Kanto"===N&&(0,o.jsx)(d.y,{handleTownClick:V,height:q,bounds:Q,guesses:D,center:W,zoom:Y}),"Johto"===N&&(0,o.jsx)(m.r,{handleTownClick:V,height:q,bounds:Q,guesses:D,center:W,zoom:Y}),"Hoenn"===N&&(0,o.jsx)(T.d,{handleTownClick:V,height:q,bounds:Q,guesses:D,center:W,zoom:Y}),"Sinnoh"===N&&(0,o.jsx)(k.m,{handleTownClick:V,height:q,bounds:Q,guesses:D,center:W,zoom:Y}),(0,o.jsxs)("div",{className:"stuff",children:[(0,o.jsxs)("div",{className:"buttons",children:[(0,o.jsx)("button",{className:"button",onClick:U,children:"Play Theme"}),(0,o.jsx)("button",{className:"button",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.pause()},children:"Stop music"}),(0,o.jsx)("button",{className:"button",onClick:()=>{localStorage.setItem("themeIndex","1"),K(0),C([])},children:"Reset"})]}),(null===(e=u.Z[N])||void 0===e?void 0:e.ogTheme)&&(0,o.jsxs)("div",{className:"theme-version-toggle",children:[(0,o.jsxs)("div",{className:"play-original-theme",children:["Play remastered ",(0,O.l)(N)," themes"]}),(0,o.jsx)(g.Y,{onChange:()=>{F(!Z),p.current&&(p.current.pause(),p.current.currentTime=0);let e=Z?u.Z[N].theme:u.Z[N].ogTheme;null==e||e.forEach(e=>{if(console.log("4"),e.towns.includes(I[0])){let t=new Audio(e.file);t.volume=.05,t.autoplay=!0,t.play(),p.current=t;return}})}})]}),(0,o.jsxs)("div",{className:"results",children:[(0,o.jsxs)("div",{className:"town-name-display",children:[(0,o.jsx)("p",{children:"Last town selected: "}),(0,o.jsx)("p",{className:"town-name",children:t||"awaiting selection..."})]}),h&&(0,o.jsx)("div",{className:(0,i.A)("Correct!"===h?"correct":"wrong"),children:h})]})]}),(0,o.jsx)(y,{isOpen:B,setIsDialogOpen:J})]})}},54030:()=>{},28021:()=>{}}]);