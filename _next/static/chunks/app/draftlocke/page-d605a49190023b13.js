(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{6647:function(){},153:function(e,r,a){Promise.resolve().then(a.bind(a,1497))},1497:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return p}});var t=a(7437),n=a(2265);a(8614);var s=a(7968),l=a(1222),i=a(9216);a(5085);let o=e=>{let{generationName:r,children:a}=e,[o,d]=(0,n.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"generation-button",onClick:()=>{d(!o)},children:[(0,t.jsx)("h2",{children:r}),(0,t.jsx)("div",{children:o?(0,t.jsx)(s.Z,{}):(0,t.jsx)(l.Z,{})})]}),(0,t.jsx)(i.Z,{in:o,timeout:"auto",unmountOnExit:!0,children:(0,t.jsx)("div",{className:"pokemon-list",children:a})})]})};var d=a(9842),c=a(5236);a(2487);var u=a(357);let m={apiKey:u.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:"draftlocke",storageBucket:u.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:u.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};var h=a(4839);let f=()=>{let[e,r]=(0,n.useState)(new Map),[a,s]=(0,n.useState)([]),[l,i]=(0,n.useState)("Unselected"),[u,f]=(0,n.useState)(new Map),[p,v]=(0,n.useState)(!1),[N,k]=(0,n.useState)(""),{setFirestoreRandomizedTeams:x,setFirestoreDraftOrder:E,getPlayersRef:j,getDraftPokemonRef:b,updatePokemonDisabled:w,setPokemonDraftedBy:y}=function(){let e=(0,c.C6)().length?(0,c.Mq)():(0,c.ZF)(m),r=(0,d.ad)(e);return{setFirestoreRandomizedTeams:async e=>{let a=(0,d.JU)(r,"players","players"),t=Object.fromEntries(e);await (0,d.r7)(a,{randomizedTeams:t})},setFirestoreDraftOrder:async e=>{let a=(0,d.JU)(r,"players","players");await (0,d.r7)(a,{draftOrder:e})},getPlayersRef:()=>(0,d.hJ)(r,"players"),getPlayers:async()=>{let e=(0,d.JU)(r,"players","players");await (0,d.QT)(e)},setPokemonDraftedBy:async(e,a)=>{let t=(0,d.JU)(r,"draft-pokemon",e);await (0,d.r7)(t,{draftedBy:a})},getDraftPokemonRef:()=>(0,d.hJ)(r,"draft-pokemon"),updatePokemonDisabled:async(e,a)=>{let t=(0,d.JU)(r,"draft-pokemon",e);await (0,d.r7)(t,{isDisabled:a})},addPokemon:async(e,a)=>{try{let t=(0,d.JU)(r,"draft-pokemon",e.toLowerCase());await (0,d.pl)(t,a)}catch(e){console.error("Error adding pokemon to Firestore: ",e)}}}}(),C=(0,n.useCallback)(r=>{let a=e.get(r);a&&w(r,!a.isDisabled)},[e,w]),_=r=>{if(e.has(r)){let a=e.get(r);return a?.isDisabled}},g=(0,n.useCallback)(r=>{let a=e.get(r);a?.draftedBy||"Unselected"===l||(y(r,l),C(r))},[e,l,y,C]),I=(0,n.useCallback)((e,r)=>{r===l&&(y(e,""),C(e))},[l,y,C]);(0,n.useEffect)(()=>{let e=(0,d.cf)(b(),e=>{let a=new Map;e.forEach(e=>{let r=e.data();a.set(e.id,{spriteUrl:r.spriteUrl,isDisabled:r.isDisabled,generation:r.generation,pokedexNumber:r.pokedexNumber,draftedBy:r.draftedBy})}),r(a)}),a=(0,d.cf)(j(),e=>{let r=[],a="";e.forEach(e=>{let t=e.data();t.players.forEach(e=>{r.push(e),a=t.draftOrder,f(new Map(Object.entries(t.randomizedTeams)))})}),s(r),k(a)}),t=e=>{"s"===e.key&&v(!0)},n=e=>{"s"===e.key&&v(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),()=>{e(),a(),window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)}},[]);let D=(0,n.useMemo)(()=>Array.from(e.entries()).reduce((e,r)=>{let[a,{spriteUrl:t,isDisabled:n,generation:s,pokedexNumber:l}]=r;return e[s]||(e[s]=[]),e[s].push({pokemonName:a,spriteUrl:t,isDisabled:n,pokedexNumber:l}),e},{}),[e]),S=(0,n.useCallback)(r=>Array.from(e.entries()).filter(e=>{let[,a]=e;return a.draftedBy===r}).map(e=>{let[r,{spriteUrl:a}]=e;return{pokemonName:r,spriteUrl:a}}),[e]),U=()=>{let e=new Map,r=[...a];a.forEach(a=>{let t=r.filter(e=>e.toLowerCase()!==a.toLowerCase());0===t.length&&(t=[r[0]]);let n=t[Math.floor(Math.random()*t.length)];e.set(a,n),r=r.filter(e=>e!==n)}),x(e)},B=e=>e.replace("/other/showdown/","/other/showdown/shiny/");return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"draft",children:[(0,t.jsx)("button",{className:"draft-order-button",onClick:()=>{let e=[...a],r="";for(;e.length;)if(e.length>1){let a=e[Math.floor(Math.random()*e.length)],t=e.indexOf(a);-1!==t&&e.splice(t,1),r+=`${a} -> `}else{r+=`${e[0]}`;break}E(r)},children:"Randomize Draft Order"}),(0,t.jsx)("button",{className:"draft-order-button",onClick:()=>E(""),children:"Clear Draft Order"}),N&&(0,t.jsx)("div",{className:"draft-order",children:N}),(0,t.jsx)("h1",{children:"Draftable Pokemon"}),(0,t.jsx)("div",{className:"draft-pokemon-container",children:Object.entries(D).sort((e,r)=>Number(e)-Number(r)).map(e=>{var r;let[a,n]=e;return(0,t.jsx)(o,{generationName:(r=Number(a))?`Generation ${function(e){let r="";for(let{value:a,numeral:t}of[{value:1e3,numeral:"M"},{value:900,numeral:"CM"},{value:500,numeral:"D"},{value:400,numeral:"CD"},{value:100,numeral:"C"},{value:90,numeral:"XC"},{value:50,numeral:"L"},{value:40,numeral:"XL"},{value:10,numeral:"X"},{value:9,numeral:"IX"},{value:5,numeral:"V"},{value:4,numeral:"IV"},{value:1,numeral:"I"}])for(;e>=a;)r+=t,e-=a;return r}(r)}`:"Starters",children:n.sort((e,r)=>Number(e.pokedexNumber)-Number(r.pokedexNumber)).map(e=>{let{pokemonName:r,spriteUrl:a}=e;return(0,t.jsxs)("div",{className:"name-and-sprite",children:[a?(0,t.jsxs)("div",{className:"sprite-container",onClick:()=>{g(r)},children:[(0,t.jsx)("img",{className:(0,h.Z)("circle",_(r)&&"show-circle"),src:"/images/Draftlocke/circle.png",alt:""}),(0,t.jsx)("img",{className:"sprite",src:a,alt:r})]}):(0,t.jsx)("div",{children:"No sprite available"}),(0,t.jsx)("h3",{children:r})]},r)})},a)})})]}),(0,t.jsxs)("div",{className:"teams",children:[(0,t.jsx)("button",{className:"random-buttons",onClick:()=>U(),children:"Randomize Team Assignments"}),(0,t.jsx)("button",{className:"random-buttons",onClick:()=>x(new Map),children:"Reset Team Assignments"}),(0,t.jsxs)("h1",{children:["Current Draftee: ",(0,t.jsx)("div",{className:"current-draftee",children:l})]}),a.map(e=>(0,t.jsxs)("div",{className:"team-container",children:[(0,t.jsxs)("h2",{onClick:()=>{i(l===e?"Unselected":e)},children:[e,"'s Drafts:"]}),u.size>0&&(0,t.jsxs)("h4",{children:["Assigned to: ",u.get(e)]}),(0,t.jsx)("div",{className:"pokemon-container",children:S(e).map(r=>{let{pokemonName:a,spriteUrl:n}=r;return(0,t.jsxs)("div",{className:"name-and-sprite",children:[n?(0,t.jsx)("div",{id:"sprite",className:"sprite-container",onClick:()=>{I(a,e)},children:(0,t.jsx)("img",{className:"sprite",src:p?B(n):n,alt:a})}):(0,t.jsx)("div",{children:"No sprite available"}),(0,t.jsx)("p",{children:a})]},a)})})]},e))]})]})};function p(){return(0,t.jsx)(f,{})}},5085:function(){},8614:function(){}},function(e){e.O(0,[546,218,358,784,827,496,971,23,744],function(){return e(e.s=153)}),_N_E=e.O()}]);