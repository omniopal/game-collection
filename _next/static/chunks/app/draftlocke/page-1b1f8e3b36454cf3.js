(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{72016:()=>{},97086:(e,a,r)=>{Promise.resolve().then(r.bind(r,63506))},63506:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>p});var t=r(95155),s=r(12115);r(55421);var n=r(15524),l=r(51644),i=r(35256);r(75933);let o=e=>{let{generationName:a,children:r}=e,[o,d]=(0,s.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"generation-button",onClick:()=>{d(!o)},children:[(0,t.jsx)("h2",{children:a}),(0,t.jsx)("div",{children:o?(0,t.jsx)(n.A,{}):(0,t.jsx)(l.A,{})})]}),(0,t.jsx)(i.A,{in:o,timeout:"auto",unmountOnExit:!0,children:(0,t.jsx)("div",{className:"pokemon-list",children:r})})]})};var d=r(27058),c=r(49904);r(51039);let m={apiKey:"AIzaSyB3B5JD2TqRKWpOD9LRDitg5ry6lu9EkPc",authDomain:"draftlocke.firebaseapp.com",projectId:"draftlocke",storageBucket:"draftlocke.appspot.com",messagingSenderId:"829000704049",appId:"1:829000704049:web:6396bb5524066fd464f510",measurementId:"G-M0R33P78JS"};var u=r(43463);let h=()=>{let[e,a]=(0,s.useState)(new Map),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)("Unselected"),[h,p]=(0,s.useState)(new Map),[f,k]=(0,s.useState)(!1),[x,v]=(0,s.useState)(""),{setFirestoreRandomizedTeams:b,setFirestoreDraftOrder:j,getPlayersRef:N,getDraftPokemonRef:y,updatePokemonDisabled:w,setPokemonDraftedBy:g}=function(){let e=(0,c.Dk)().length?(0,c.Sx)():(0,c.Wp)(m),a=(0,d.aU)(e);return{setFirestoreRandomizedTeams:async e=>{let r=(0,d.H9)(a,"players","players"),t=Object.fromEntries(e);await (0,d.mZ)(r,{randomizedTeams:t})},setFirestoreDraftOrder:async e=>{let r=(0,d.H9)(a,"players","players");await (0,d.mZ)(r,{draftOrder:e})},getPlayersRef:()=>(0,d.rJ)(a,"players"),getPlayers:async()=>{let e=(0,d.H9)(a,"players","players");await (0,d.x7)(e)},setPokemonDraftedBy:async(e,r)=>{let t=(0,d.H9)(a,"draft-pokemon",e);await (0,d.mZ)(t,{draftedBy:r})},getDraftPokemonRef:()=>(0,d.rJ)(a,"draft-pokemon"),updatePokemonDisabled:async(e,r)=>{let t=(0,d.H9)(a,"draft-pokemon",e);await (0,d.mZ)(t,{isDisabled:r})},addPokemon:async(e,r)=>{try{let t=(0,d.H9)(a,"draft-pokemon",e.toLowerCase());await (0,d.BN)(t,r)}catch(e){console.error("Error adding pokemon to Firestore: ",e)}}}}(),C=(0,s.useCallback)(a=>{let r=e.get(a);r&&w(a,!r.isDisabled)},[e,w]),D=a=>{if(e.has(a)){let r=e.get(a);return null==r?void 0:r.isDisabled}},E=(0,s.useCallback)(a=>{let r=e.get(a);null!=r&&r.draftedBy||"Unselected"===l||(g(a,l),C(a))},[e,l,g,C]),M=(0,s.useCallback)((e,a)=>{a===l&&(g(e,""),C(e))},[l,g,C]);(0,s.useEffect)(()=>{let e=(0,d.aQ)(y(),e=>{let r=new Map;e.forEach(e=>{let a=e.data();r.set(e.id,{spriteUrl:a.spriteUrl,isDisabled:a.isDisabled,generation:a.generation,pokedexNumber:a.pokedexNumber,draftedBy:a.draftedBy})}),a(r)}),r=(0,d.aQ)(N(),e=>{let a=[],r="";e.forEach(e=>{let t=e.data();t.players.forEach(e=>{a.push(e),r=t.draftOrder,p(new Map(Object.entries(t.randomizedTeams)))})}),n(a),v(r)}),t=e=>{"s"===e.key&&k(!0)},s=e=>{"s"===e.key&&k(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",s),()=>{e(),r(),window.removeEventListener("keydown",t),window.removeEventListener("keyup",s)}},[]);let O=(0,s.useMemo)(()=>Array.from(e.entries()).reduce((e,a)=>{let[r,{spriteUrl:t,isDisabled:s,generation:n,pokedexNumber:l}]=a;return e[n]||(e[n]=[]),e[n].push({pokemonName:r,spriteUrl:t,isDisabled:s,pokedexNumber:l}),e},{}),[e]),S=(0,s.useCallback)(a=>Array.from(e.entries()).filter(e=>{let[,r]=e;return r.draftedBy===a}).map(e=>{let[a,{spriteUrl:r}]=e;return{pokemonName:a,spriteUrl:r}}),[e]),A=()=>{let e=new Map,a=[...r];r.forEach(r=>{let t=a.filter(e=>e.toLowerCase()!==r.toLowerCase());0===t.length&&(t=[a[0]]);let s=t[Math.floor(Math.random()*t.length)];e.set(r,s),a=a.filter(e=>e!==s)}),b(e)},L=e=>e.replace("/other/showdown/","/other/showdown/shiny/");return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"draft",children:[(0,t.jsx)("button",{className:"draft-order-button",onClick:()=>{let e=[...r],a="";for(;e.length;)if(e.length>1){let r=e[Math.floor(Math.random()*e.length)],t=e.indexOf(r);-1!==t&&e.splice(t,1),a+="".concat(r," -> ")}else{a+="".concat(e[0]);break}j(a)},children:"Randomize Draft Order"}),(0,t.jsx)("button",{className:"draft-order-button",onClick:()=>j(""),children:"Clear Draft Order"}),x&&(0,t.jsx)("div",{className:"draft-order",children:x}),(0,t.jsx)("h1",{children:"Draftable Pokemon"}),(0,t.jsx)("div",{className:"draft-pokemon-container",children:Object.entries(O).sort((e,a)=>Number(e)-Number(a)).map(e=>{let[a,r]=e;return(0,t.jsx)(o,{generationName:function(e){return e?"Generation ".concat(function(e){let a="";for(let{value:r,numeral:t}of[{value:1e3,numeral:"M"},{value:900,numeral:"CM"},{value:500,numeral:"D"},{value:400,numeral:"CD"},{value:100,numeral:"C"},{value:90,numeral:"XC"},{value:50,numeral:"L"},{value:40,numeral:"XL"},{value:10,numeral:"X"},{value:9,numeral:"IX"},{value:5,numeral:"V"},{value:4,numeral:"IV"},{value:1,numeral:"I"}])for(;e>=r;)a+=t,e-=r;return a}(e)):"Starters"}(Number(a)),children:r.sort((e,a)=>Number(e.pokedexNumber)-Number(a.pokedexNumber)).map(e=>{let{pokemonName:a,spriteUrl:r}=e;return(0,t.jsxs)("div",{className:"name-and-sprite",children:[r?(0,t.jsxs)("div",{className:"sprite-container",onClick:()=>{E(a)},children:[(0,t.jsx)("img",{className:(0,u.A)("circle",D(a)&&"show-circle"),src:"/images/Draftlocke/circle.png",alt:""}),(0,t.jsx)("img",{className:"sprite",src:r,alt:a})]}):(0,t.jsx)("div",{children:"No sprite available"}),(0,t.jsx)("h3",{children:a})]},a)})},a)})})]}),(0,t.jsxs)("div",{className:"teams",children:[(0,t.jsx)("button",{className:"random-buttons",onClick:()=>A(),children:"Randomize Team Assignments"}),(0,t.jsx)("button",{className:"random-buttons",onClick:()=>b(new Map),children:"Reset Team Assignments"}),(0,t.jsxs)("h1",{children:["Current Draftee: ",(0,t.jsx)("div",{className:"current-draftee",children:l})]}),r.map(e=>(0,t.jsxs)("div",{className:"team-container",children:[(0,t.jsxs)("h2",{onClick:()=>{i(l===e?"Unselected":e)},children:[e,"'s Drafts:"]}),h.size>0&&(0,t.jsxs)("h4",{children:["Assigned to: ",h.get(e)]}),(0,t.jsx)("div",{className:"pokemon-container",children:S(e).map(a=>{let{pokemonName:r,spriteUrl:s}=a;return(0,t.jsxs)("div",{className:"name-and-sprite",children:[s?(0,t.jsx)("div",{id:"sprite",className:"sprite-container",onClick:()=>{M(r,e)},children:(0,t.jsx)("img",{className:"sprite",src:f?L(s):s,alt:r})}):(0,t.jsx)("div",{children:"No sprite available"}),(0,t.jsx)("p",{children:r})]},r)})})]},e))]})]})};function p(){return(0,t.jsx)(h,{})}},75933:()=>{},55421:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[995,268,992,2,417,586,441,517,358],()=>a(97086)),_N_E=e.O()}]);